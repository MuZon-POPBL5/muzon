<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!--JQUERY-->
  <script src="https://code.jquery.com/jquery-3.3.1.min.js"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>


  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf"
    crossorigin="anonymous"></script>

  <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
    integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">


  <script src="lib/js/bootstrap.min.js"></script>
  <link rel="stylesheet" type="text/css" href="static/css/user-form.css" th:href="@{/css/user-form.css}">

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
    crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/jquery-3.5.0.js"></script>
  <title>Muzon</title>
</head>

<body>
  <div class="row d-flex g-5 mx-4 mt-1 mb-5 align-items-center justify-content-between">
    <tr th:each="product: ${categoryList}">
      <!--<td th:text="${product.id}"></td>     PASAR AQUI ID DE USER PARA PODER PASAR EN EL SCRIPT-->
      <div class="col">
        <div class="card">
          <a th:href="@{'/displayProducts/' + ${product.id}}" class="text-decoration-none">
            <img src="" class="card-img-top text-dark" alt="Product image">
            <div class="card-body">
              <h5 class="card-title text-dark" th:text="${product.name}"></h5>
              <p class="card-text text-dark" th:text="${product.description}"></p>
            </div>
          </a>
        </div>
      </div>
    </tr>
  </div>

  <div class="d-none py-3 footer fixed-bottom text-end" id="backtotop">
    <span class="fa-stack mx-2 fa-lg">
      <a href="#">
        <img src=https://cdn.jsdelivr.net/npm/bootstrap-icons/icons/arrow-up-circle-fill.svg width="32" height="32"
          alt="">
      </a>
    </span>
  </div>
</body>

<script>
  function displayProduct() {
    var http = new XMLHttpRequest();
    var id = 2;

    var url = "/displayProducts/" + id;

    

    console.log(idP);

    http.open('POST', url, true);

    http.onreadystatechange = function () {//Call a function when the state changes.
      if (http.status == 200) {
        $("#cambios").removeClass("d-none");
        $("#cambios").html(http.responseText);
        $("#principal").addClass("d-none");
        $("#back").removeClass("d-none");
        $("#searchAndSell").addClass("d-none");
      }
    }

    http.send("cp=" + idP);
  }

  var prevScrollpos = window.pageYOffset;
  var first = 0;
  window.onscroll = function () {
    var currentScrollPos = window.pageYOffset;

    console.log(currentScrollPos);
    if (currentScrollPos == 0) {
      console.log("sdad");
      $("#backtotop").addClass("d-none");
      first = 0;

    } else if (currentScrollPos > 20) {
      $("#backtotop").removeClass("d-none");
      console.log(first);
      if (first == 0) {
        $('#backtotop').fadeTo(0, 0);
        first = 1;
        $('#backtotop').fadeTo(1000, 1);
      }
    }
    prevScrollpos = currentScrollPos;
  }
</script>